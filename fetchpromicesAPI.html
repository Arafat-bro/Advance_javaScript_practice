<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promices fetch API</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <div id="container">
        <div class="text-center">
        <div class="bg-secondary w-50 m-auto text-light mt-4 curved" id="jokes">
            Joke is loading...
        </div>
        <div class="btn btn-warning text-dark btn-block jokebtn btn-md w-10 text-center m-auto mt-3">Next</div>
        </div>
    </div>

    <script>
        const jokes = document.querySelector('#jokes');
        const jokebtn = document.querySelector('.jokebtn');

        // const generatejokes = () => {
        //     setHeader = {
        //         headers : {
        //             Accept : "application/json"
        //         }
        //     }
        //     fetch('https://icanhazdadjoke.com',setHeader)
        //     .then((res) => res.json())
        //     .then((data) => jokes.innerHTML = data.joke)
        //     .catch((error) => console.log(error))
        // }
        // jokebtn.addEventListener('click',generatejokes);
        // generatejokes();

        //same as ->
         
        const generatejokes = async() => {
            try{
                setHeader = {
                headers : {
                    Accept : "application/json"
                }
            }
            const res = await fetch('https://icanhazdadjoke.com',setHeader);
            const data = await res.json();
            jokes.innerHTML = data.joke;
        }catch(err){
            console.log(`the error is ${err}`);}
        }
            
        jokebtn.addEventListener('click',generatejokes);
        generatejokes();
        
    </script>
    <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>